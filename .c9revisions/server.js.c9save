{"ts":1349735729438,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var app = require('http').createServer(handler)\r\n, io = require('socket.io').listen(app)\r\n, fs = require('fs')\r\n\r\napp.listen(process.env.PORT || 8001);\r\n\r\nfunction handler (req, res) {\r\nfs.readFile('index.html',\r\nfunction (err, data) {\r\nif (err) {\r\nres.writeHead(500);\r\nreturn res.end('Error loading index.html');\r\n}\r\n\r\nres.writeHead(200, {'Content-Type': 'text/html', \"Content-Length\": data.length});\r\nres.end(data);\r\n});\r\n}\r\n\r\nio.sockets.on('connection', function (socket) {\r\n// echo the message\r\nsocket.on('message', function (data) {\r\nconsole.info(data);\r\nsocket.send(\"[ECHO] \"+data);\r\n});\r\n});"]],"start1":0,"start2":0,"length1":0,"length2":598}]],"length":598}
